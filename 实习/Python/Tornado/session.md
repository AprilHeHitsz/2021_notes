# Session 

## 前端存储的用户数据-Cookie

前端发送数据给服务器时，用以提供给服务器识别用户身份的数据。

 ## 后端存储的用户数据

直接存储的是user_id、user_name等敏感数据。一般不直接提供给用户，而是提供一个临时身份——session_id。

所以用户的浏览器中存储的cookie就是session_id。

用户请求过来的时候，首先判断有没有生成这个临时身份，如果没有，就先存储用户信息、生成临时身份，并将临时身份设置到cookie中返回给用户。

## 存储临时身份 

session_id可以存在文件中、数据库中、程序运行的内存中（字典）、缓存中。

### 程序中

但是如果存在程序中，如果开启了多个进程，并由ngix反向代理过来，那么每一个进程中的存储是独立的，会出现混乱。

所以在ngix的配置中，可以设置，将某个用户的session数据存到一个固定的端口对应的进程中。具体地说，是有关于hash的原理。

### 缓存中

放在redis里面没有上述问题。可以设置数据有效期。 

