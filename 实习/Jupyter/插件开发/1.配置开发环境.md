# 配置开发环境
## 首先使用cookiecutter工具下载模板
```
cookiecutter https://github.com/JupyterLab/extension-cookiecutter-ts
```
按照提示，填写相应的基础信息。
填写完毕后，会在当前目录下创建一个新的文件夹，名称是刚才填写的<extension_name>.

>1_hello_world/  
├── README.md  
├── package.json  
├── tsconfig.json  
├── src  
│   └── index.ts  
└── style  
    └── index.css  

其中，各个文件的作用如下：  
README.md:说明文件.  
package.json:这个扩展相关的信息，例如依赖.  
tsconfig.json:ts的编译信息.  
src/index.ts:typescript代码,这个扩展的逻辑部分.  
style/index.css:样式元素.  

## 对src/index.ts进行解读：
```
import {
  JupyterLab, JupyterLabPlugin
} from '@JupyterLab/application';

import '../style/index.css';
```
以上是它的import部分。  
Jupyterlab，是主程序的类；JupyterLabPlugin是我们需要构建的扩展的类；  
这两个类都从@JupyterLab/application这个包中import.  

在package.json中需要声明对这个包的依赖：
```
"dependencies": {  
    "@JupyterLab/application": "^0.16.0"  
},
```
在这个import的基础上，继续构建一个新的JupyterLabPlugin实例。
```
const extension: JupyterLabPlugin<void> = {  
  id: '1_hello_world',  
  autoStart: true,  
  activate: (app: JupyterLab) => {   
    console.log('JupyterLab extension 1_hello_world is activated!');  
  }  
};
export default extension; 
```
在以上代码中，id、autoStart、activate是extension的属性。id设置为‘1_hello_world',autoStart设置为true，activate链接到一个函数。  
这个函数中，其传入的参数为JupyterLab类型的变量app，在函数中调用了console.log函数。  
activate函数是整个extension的entrypoint，也就是我们要编写extension的代码的地方。

## 创建和安装扩展  
在README.md中，说明了如何安装labextension以进行开发。
在repository目录中，执行以下操作：
```
npm install  
npm run build  
jupyter labextension link  
```
- npm install：安装package.json中的依赖项；
- npm run build：运行build脚本，使用编译器tsc将ts代码转换成js代码；
- jupyter labextension link：将这个模块链接到JupyterLab

完成了这些步骤之后，执行  
```
jupyter labextension list  
```
会显示
>   local extensions:  
        1_hello_world: [...]/labextension_tutorial/  
        1_hello_world    
    
然后执行
```
jupyter lab --watch  
```
在浏览器中打开console（F12)，可以看到打印出来“JupyterLab extension 1_hello_world is activated".  
修改activate函数如下:
```
    activate: (app: JupyterLab) => {
        console.log('the main JupyterLab application:');
        console.log(app);
    }
```
想要应用这些更改，只需执行：
```
npm run build
```
由于启动JupyterLab时使用了--watch选项，因此只需要刷新网页就可看到在console中打印出
>Object { _started: true, _pluginMap: {…}, _serviceMap: Map(28), _delegate: {…}, commands: {…}, contextMenu: {…}, shell: {…}, registerPluginErrors: [], _dirtyCount: 0, _info: {…}, … } index.js:12

也就是主应用JupyterLab对象。  
可以看看在https://github.com/JupyterLab/JupyterLab/tree/master/packages中JupyterLab的核心包定义，每个包的结构和extension的结构类似。这使得它适应性非常强。  





